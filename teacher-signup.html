<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teacher Sign Up</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #C9E4DE;
      padding: 20px;
      color: black;
      transition: direction 0.3s ease;
    }
    h1 {
      text-align: center;
      color: black;
    }
    form {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(27, 73, 101, 0.2);
      color: black;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      color: black;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
      border-radius: 6px;
      border: 1px solid #ccc;
      color: black;
      font-size: 1rem;
    }
    .days-checkboxes label {
      font-weight: normal;
      margin-right: 10px;
      color: black;
      user-select: none;
      cursor: pointer;
    }
    .days-checkboxes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    button {
      margin-top: 20px;
      background-color: #FAEDCB;
      color: black;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #e6d8a5;
    }
    #file-name {
      margin-top: 5px;
      font-style: italic;
      color: black;
    }
    #lang-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #FAEDCB;
      color: black;
      border: none;
      padding: 8px 14px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      max-width: 120px;
      white-space: nowrap;
      user-select: none;
      z-index: 1000;
      transition: background-color 0.3s ease;
    }
    #lang-toggle:hover {
      background-color: #e6d8a5;
    }
  </style>
</head>
<body>

<button id="lang-toggle" aria-label="Toggle Language">عربي</button>
<h1 data-en="Teacher Sign Up" data-ar="تسجيل المعلمين">Teacher Sign Up</h1>

<form id="signup-form" enctype="multipart/form-data" novalidate>
  <label for="fullname" data-en="Full Name" data-ar="الاسم الكامل">Full Name</label>
  <input id="fullname" name="fullname" type="text" required
         data-placeholder-en="Enter your full name" data-placeholder-ar="أدخل اسمك الكامل" />

  <label for="email" data-en="Email" data-ar="البريد الإلكتروني">Email</label>
  <input id="email" name="email" type="email" required
         data-placeholder-en="Enter your email" data-placeholder-ar="أدخل بريدك الإلكتروني" />

  <label for="password" data-en="Password" data-ar="كلمة المرور">Password</label>
  <input id="password" name="password" type="password" required minlength="6"
         data-placeholder-en="Enter password" data-placeholder-ar="أدخل كلمة المرور" />

  <label for="whatsapp" data-en="WhatsApp Number" data-ar="رقم الواتساب">WhatsApp Number</label>
  <input id="whatsapp" name="whatsapp" type="text" required pattern="^\+?[0-9]{7,15}$"
         data-placeholder-en="e.g. +971501234567" data-placeholder-ar="مثال: +971501234567" />

  <label for="bank" data-en="Bank Name" data-ar="اسم البنك">Bank Name</label>
  <input id="bank" name="bank" type="text" required
         data-placeholder-en="Enter bank name" data-placeholder-ar="أدخل اسم البنك" />

  <label for="iban" data-en="IBAN Number" data-ar="رقم الآيبان">IBAN Number</label>
  <input id="iban" name="iban" type="text" required pattern="^[A-Z0-9]{15,34}$"
         data-placeholder-en="Enter IBAN" data-placeholder-ar="أدخل رقم الآيبان" />

  <label for="subject-select" data-en="Subject" data-ar="المادة">Subject</label>
  <select name="subject" required id="subject-select">
    <option value="" disabled selected data-en="Select Subject" data-ar="اختر المادة">Select Subject</option>
    <option value="physics">Physics</option>
    <option value="mathematics">Mathematics</option>
    <option value="biology">Biology</option>
    <option value="chemistry">Chemistry</option>
    <option value="science">Science</option>
    <option value="arabic">Arabic</option>
    <option value="english">English</option>
    <option value="french">French</option>
    <option value="chinese">Chinese</option>
    <option value="islamic">Islamic Studies</option>
  </select>

  <label for="grade-select" data-en="Grade" data-ar="الصف الدراسي">Grade</label>
  <select name="grade" required id="grade-select">
    <option value="" disabled selected data-en="Select Grade" data-ar="اختر الصف">Select Grade</option>
    <option value="Grade1">Grade 1</option>
    <option value="Grade2">Grade 2</option>
    <option value="Grade3">Grade 3</option>
    <option value="Grade4">Grade 4</option>
    <option value="Grade5">Grade 5</option>
    <option value="Grade6">Grade 6</option>
    <option value="Grade7">Grade 7</option>
    <option value="Grade8">Grade 8</option>
    <option value="Grade9">Grade 9</option>
    <option value="Grade10">Grade 10</option>
    <option value="Grade11">Grade 11</option>
    <option value="Grade12">Grade 12</option>
  </select>

  <label for="gender-select" data-en="Gender" data-ar="اللقب">Gender</label>
  <select name="gender" required id="gender-select">
    <option value="" disabled selected data-en="Select Title" data-ar="اختر اللقب">Select Title</option>
    <option value="mr">Mr</option>
    <option value="ms">Ms</option>
  </select>

  <label id="availability-label" data-en="Availability (Select days and times)" data-ar="أوقات التوفر (اختر الأيام والأوقات)">Select workdays</label>
  <div class="days-checkboxes" id="days-container" role="group" aria-label="Select days">
    <label><input type="checkbox" value="Sunday" name="days" /> Sunday</label>
    <label><input type="checkbox" value="Monday" name="days" /> Monday</label>
    <label><input type="checkbox" value="Tuesday" name="days" /> Tuesday</label>
    <label><input type="checkbox" value="Wednesday" name="days" /> Wednesday</label>
    <label><input type="checkbox" value="Thursday" name="days" /> Thursday</label>
    <label><input type="checkbox" value="Friday" name="days" /> Friday</label>
    <label><input type="checkbox" value="Saturday" name="days" /> Saturday</label>
  </div>

  <label for="certificate-input" data-en="Upload Certificate" data-ar="تحميل الشهادة">Upload Certificate</label>
  <input id="certificate-input" name="certificate" type="file" accept=".pdf,.jpg,.jpeg,.png" aria-describedby="file-name" />
  <div id="file-name"></div>

  <button type="submit" data-en="Sign Up" data-ar="تسجيل">Sign Up</button>
</form>

<script>
  const langToggle = document.getElementById("lang-toggle");
  const htmlEl = document.documentElement;
  const body = document.body;
  let currentLang = "en";

  function updateLanguage(lang) {
    currentLang = lang;
    htmlEl.lang = lang;
    if (lang === "ar") {
      htmlEl.dir = "rtl";
      langToggle.textContent = "English";
      body.style.textAlign = "right";
    } else {
      htmlEl.dir = "ltr";
      langToggle.textContent = "عربي";
      body.style.textAlign = "left";
    }

    // Translate text content and placeholders
    document.querySelectorAll("[data-en]").forEach(el => {
      if (lang === "ar") {
        if (el.tagName === "INPUT" || el.tagName === "SELECT") {
          if (el.hasAttribute("data-placeholder-ar")) {
            el.placeholder = el.getAttribute("data-placeholder-ar");
          }
        } else {
          el.textContent = el.getAttribute("data-ar");
        }
      } else {
        if (el.tagName === "INPUT" || el.tagName === "SELECT") {
          if (el.hasAttribute("data-placeholder-en")) {
            el.placeholder = el.getAttribute("data-placeholder-en");
          }
        } else {
          el.textContent = el.getAttribute("data-en");
        }
      }
    });

    // Translate options inside selects separately (subject, grade, gender)
    const subjects = {
      en: ["Select Subject", "Physics", "Mathematics", "Biology", "Chemistry", "Science", "Arabic", "English", "French", "Chinese", "Islamic Studies"],
      ar: ["اختر المادة", "الفيزياء", "الرياضيات", "الأحياء", "الكيمياء", "العلوم", "العربية", "الإنجليزية", "الفرنسية", "الصينية", "الدراسات الإسلامية"]
    };
    const grades = {
      en: ["Select Grade", "Grade 1", "Grade 2", "Grade 3", "Grade 4", "Grade 5", "Grade 6", "Grade 7", "Grade 8", "Grade 9", "Grade 10", "Grade 11", "Grade 12"],
      ar: ["اختر الصف", "الصف 1", "الصف 2", "الصف 3", "الصف 4", "الصف 5", "الصف 6", "الصف 7", "الصف 8", "الصف 9", "الصف 10", "الصف 11", "الصف 12"]
    };
    const genders = {
      en: ["Select Title", "Mr", "Ms"],
      ar: ["اختر اللقب", "السيد", "السيدة"]
    };

    function updateSelectOptions(selectId, options) {
      const select = document.getElementById(selectId);
      if (!select) return;
      const currentVal = select.value;
      select.innerHTML = "";
      options.forEach((opt, idx) => {
        const option = document.createElement("option");
        option.value = idx === 0 ? "" : select.options[idx] ? select.options[idx].value : opt.toLowerCase();
        option.textContent = opt;
        if (idx === 0) option.disabled = true;
        if (select.value === option.value) option.selected = true;
        select.appendChild(option);
      });
      if (currentVal && [...select.options].some(o => o.value === currentVal)) {
        select.value = currentVal;
      }
    }

    updateSelectOptions("subject-select", subjects[lang]);
    updateSelectOptions("grade-select", grades[lang]);
    updateSelectOptions("gender-select", genders[lang]);

    // Days translation
    const daysContainer = document.getElementById("days-container");
    const daysLabels = daysContainer.querySelectorAll("label");
    const daysText = {
      en: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
      ar: ["الأحد", "الإثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة", "السبت"]
    };
    daysLabels.forEach((label, idx) => {
      label.childNodes[1].nodeValue = " " + daysText[lang][idx];
    });

    // Translate button text
    document.querySelector("button[type='submit']").textContent = lang === "ar" ? "تسجيل" : "Sign Up";

    // Translate availability label
    const availabilityLabel = document.getElementById("availability-label");
    availabilityLabel.textContent = lang === "ar" ? "أوقات التوفر (اختر الأيام والأوقات)" : "Availability (Select days and times)";
  }

  langToggle.addEventListener("click", () => {
    if (currentLang === "en") {
      updateLanguage("ar");
    } else {
      updateLanguage("en");
    }
  });

  // Initialize language on page load
  updateLanguage("en");

  // Manage dynamic time inputs per selected day
  const daysContainer = document.getElementById("days-container");
  const timeInputsDiv = document.getElementById("time-inputs");

  function createTimeInputs(day) {
    // Create container div
    const div = document.createElement("div");
    div.classList.add("time-range");
    div.dataset.day = day;

    const labelStart = document.createElement("label");
    labelStart.textContent = currentLang === "ar" ? "وقت البدء لـ " + day : "Start Time for " + day;
    labelStart.setAttribute("for", `start-${day}`);

    const startInput = document.createElement("input");
    startInput.type = "time";
    startInput.id = `start-${day}`;
    startInput.name = `start-${day}`;
    startInput.required = true;

    const labelEnd = document.createElement("label");
    labelEnd.textContent = currentLang === "ar" ? "وقت الانتهاء لـ " + day : "End Time for " + day;
    labelEnd.setAttribute("for", `end-${day}`);

    const endInput = document.createElement("input");
    endInput.type = "time";
    endInput.id = `end-${day}`;
    endInput.name = `end-${day}`;
    endInput.required = true;

    // Append inputs & labels
    // To align nicely, group labels + inputs side by side
    div.appendChild(labelStart);
    div.appendChild(startInput);
    div.appendChild(labelEnd);
    div.appendChild(endInput);

    return div;
  }

  function updateTimeInputsLang() {
    // Update labels text for existing time inputs on language toggle
    const timeDivs = timeInputsDiv.querySelectorAll(".time-range");
    timeDivs.forEach(div => {
      const day = div.dataset.day;
      const labels = div.querySelectorAll("label");
      if (labels.length >= 2) {
        labels[0].textContent = currentLang === "ar" ? "وقت البدء لـ " + day : "Start Time for " + day;
        labels[1].textContent = currentLang === "ar" ? "وقت الانتهاء لـ " + day : "End Time for " + day;
      }
    });
  }

  daysContainer.addEventListener("change", e => {
    if (e.target.name === "days") {
      if (e.target.checked) {
        const day = e.target.value;
        const timeInputs = createTimeInputs(day);
        timeInputsDiv.appendChild(timeInputs);
        updateTimeInputsLang();
      } else {
        // Remove time inputs for unchecked day
        const existingDiv = timeInputsDiv.querySelector(`div[data-day="${e.target.value}"]`);
        if (existingDiv) existingDiv.remove();
      }
    }
  });

  // File input show file name
  const certInput = document.getElementById("certificate-input");
  const fileNameDiv = document.getElementById("file-name");

  certInput.addEventListener("change", () => {
    const files = certInput.files;
    if (files.length > 0) {
      fileNameDiv.textContent = files[0].name;
    } else {
      fileNameDiv.textContent = "";
    }
  });

  // Basic form validation on submit
  const form = document.getElementById("signup-form");
  form.addEventListener("submit", e => {
    e.preventDefault();

    // Check required inputs manually since novalidate is set
    const requiredFields = ["fullname", "email", "password", "whatsapp", "bank", "iban", "subject-select", "grade-select", "gender-select"];
    let valid = true;
    let messages = [];

    requiredFields.forEach(id => {
      const field = document.getElementById(id);
      if (!field || !field.value.trim()) {
        valid = false;
        messages.push((currentLang === "ar" ? "يرجى تعبئة " : "Please fill in ") + (field.previousElementSibling.textContent));
      }
    });

    // Check days selected and corresponding time inputs
    const checkedDays = form.querySelectorAll("input[name='days']:checked");
    if (checkedDays.length === 0) {
      valid = false;
      messages.push(currentLang === "ar" ? "يرجى اختيار أيام التوفر" : "Please select availability days");
    } else {
      // Validate time inputs for each selected day
      for (const dayCheckbox of checkedDays) {
        const day = dayCheckbox.value;
        const startInput = form.querySelector(`input[name='start-${day}']`);
        const endInput = form.querySelector(`input[name='end-${day}']`);
        if (!startInput || !endInput || !startInput.value || !endInput.value) {
          valid = false;
          messages.push((currentLang === "ar" ? "يرجى تحديد أوقات البدء والانتهاء ليوم " : "Please specify start and end times for ") + day);
          break;
        }
        if (startInput.value >= endInput.value) {
          valid = false;
          messages.push((currentLang === "ar" ? "وقت البدء يجب أن يكون قبل وقت الانتهاء ليوم " : "Start time must be before end time for ") + day);
          break;
        }
      }
    }

    if (!valid) {
      alert(messages.join("\n"));
      return;
    }

    alert(currentLang === "ar" ? "تم التسجيل بنجاح!" : "Successfully signed up!");
    form.reset();
    timeInputsDiv.innerHTML = "";
    fileNameDiv.textContent = "";
  });
</script>

</body>
</html>
