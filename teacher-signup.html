<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Signup</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #C9E4DE;
      text-align: center;
      padding: 20px;
      margin: 0;
    }

    .signup-container {
      background-color: white;
      border-radius: 12px;
      padding: 20px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    input, select {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .language-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 8px 14px;
      background-color: #FAEDCB;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      color: black;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s;
    }

    .language-toggle:hover {
      background-color: #e5d6b0;
    }

    #submit-button {
      background-color: #FAEDCB;
      color: black;
      border: none;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      cursor: pointer;
    }

    #submit-button:hover {
      background-color: #e5d6b0;
    }

    #file-label {
      display: block;
      padding: 10px;
      background-color: #FAEDCB;
      color: black;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px 0;
    }

    #file-name {
      font-size: 0.9em;
      color: #333;
    }

    .g_id_signin {
      margin-top: 15px;
    }

    .or-divider {
      margin: 15px 0;
      font-weight: bold;
    }

    .login-link {
      margin-top: 20px;
      font-size: 0.95em;
    }

    .login-link a {
      color: #007acc;
      text-decoration: none;
      font-weight: bold;
    }

    .login-link a:hover {
      text-decoration: underline;
    }

    .day-row {
      text-align: left;
      margin-bottom: 10px;
    }

    .day-row input[type="checkbox"] {
      margin-right: 10px;
    }

    .day-row input[type="time"] {
      width: 45%;
      display: inline-block;
    }
  </style>
</head>
<body>
  <button class="language-toggle" onclick="toggleLanguage()" id="langToggleBtn">عربي</button>

  <div class="signup-container">
    <h2 id="signup-title">Teacher Sign Up</h2>

    <!-- Google Sign Up -->
    <div id="g_id_onload"
      data-client_id="517961306953-uc2pmelkvuq0ji44moebff6786hsci21.apps.googleusercontent.com"
      data-context="signup"
      data-ux_mode="popup"
      data-callback="handleCredentialResponse"
      data-auto_prompt="false">
    </div>
    <div class="g_id_signin" data-type="standard"></div>

    <div class="or-divider" id="orText">or</div>

    <!-- Signup Form -->
    <form id="signup-form">
      <input type="text" placeholder="Full Name" id="fullname-input" required />
      <input type="email" placeholder="Email" id="email-input" required />
      <input type="password" placeholder="Password" id="password-input" required />
      <input type="text" placeholder="IBAN" id="iban-input" required />
      <input type="text" placeholder="Bank Name" id="bank-input" required />
	  <select id="subject-input" required>
  <option value="" disabled selected>-- Select Subject --</option>
  <option value="physics">Physics</option>
  <option value="mathematics">Mathematics</option>
  <option value="biology">Biology</option>
  <option value="chemistry">Chemistry</option>
  <option value="science">Science</option>
  <option value="arabic">Arabic</option>
  <option value="english">English</option>
  <option value="french">French</option>
  <option value="chinese">Chinese</option>
  <option value="islamic_studies">Islamic Studies</option>
</select>

<select id="grade-input" required>
  <option value="" disabled selected>-- Select Grade --</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
  <option value="11">11</option>
  <option value="12">12</option>
</select>


      <select id="gender-input" required>
        <option value="male">Mr</option>
        <option value="female">Ms</option>
      </select>

      <label id="availability-label"><strong>Availability:</strong></label>
      <div id="days-container"></div>

      <input type="file" id="certificate-input" accept="image/*,.pdf" required style="display: none;" />
      <label for="certificate-input" id="file-label">Upload University Certificate</label>
      <span id="file-name"></span>

      <button type="submit" id="submit-button">Sign Up</button>
    </form>

    <div class="login-link" id="loginText">
      Already have an account? <a href="login.html">Login</a>
    </div>
  </div>

  <script>
    let isArabic = false;

    const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const daysAr = ["الأحد", "الاثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة", "السبت"];

    function handleCredentialResponse(response) {
      console.log("Encoded JWT ID token: " + response.credential);
    }

    function renderDays() {
      const container = document.getElementById("days-container");
      container.innerHTML = "";
      (isArabic ? daysAr : days).forEach((day, index) => {
        const div = document.createElement("div");
        div.className = "day-row";
        div.innerHTML = `
          <label>
            <input type="checkbox" id="day-${index}" onchange="toggleTimeInputs(${index})"> ${day}
          </label><br/>
          <input type="time" id="from-${index}" placeholder="From" disabled />
          <input type="time" id="to-${index}" placeholder="To" disabled />
        `;
        container.appendChild(div);
      });
    }

    function toggleTimeInputs(index) {
      const isChecked = document.getElementById(`day-${index}`).checked;
      document.getElementById(`from-${index}`).disabled = !isChecked;
      document.getElementById(`to-${index}`).disabled = !isChecked;
    }

    function updateFileLabel() {
      document.getElementById("file-label").innerText = isArabic ? "ارفع شهادة الجامعة" : "Upload University Certificate";
    }

    function toggleLanguage() {
      isArabic = !isArabic;
      document.documentElement.lang = isArabic ? "ar" : "en";
      document.documentElement.dir = isArabic ? "rtl" : "ltr";

      document.getElementById("signup-title").innerText = isArabic ? "تسجيل المعلم" : "Teacher Sign Up";
      document.getElementById("fullname-input").placeholder = isArabic ? "الاسم الكامل" : "Full Name";
      document.getElementById("email-input").placeholder = isArabic ? "البريد الإلكتروني" : "Email";
      document.getElementById("password-input").placeholder = isArabic ? "كلمة المرور" : "Password";
      document.getElementById("subject-input").placeholder = isArabic ? "المادة" : "Subject";
      document.getElementById("grade-input").placeholder = isArabic ? "الصف" : "Grade";
      document.getElementById("iban-input").placeholder = isArabic ? "رقم الآيبان" : "IBAN";
      document.getElementById("bank-input").placeholder = isArabic ? "اسم البنك" : "Bank Name";

      document.getElementById("gender-input").options[0].text = isArabic ? "أستاذ" : "Mr";
      document.getElementById("gender-input").options[1].text = isArabic ? "معلمة" : "Ms";

      document.getElementById("submit-button").innerText = isArabic ? "إنشاء حساب" : "Sign Up";
      document.getElementById("langToggleBtn").innerText = isArabic ? "English" : "عربي";
      document.getElementById("orText").innerText = isArabic ? "أو" : "or";
      document.getElementById("loginText").innerHTML = isArabic
        ? 'هل لديك حساب؟ <a href="login.html">تسجيل الدخول</a>'
        : 'Already have an account? <a href="login.html">Login</a>';

      document.getElementById("availability-label").innerHTML = isArabic ? "<strong>الأيام والأوقات المتاحة:</strong>" : "<strong>Availability:</strong>";

      updateFileLabel();
      renderDays();
    }

    renderDays();

    document.getElementById("certificate-input").addEventListener("change", function () {
      const file = this.files[0];
      document.getElementById("file-name").innerText = file ? file.name : '';
    });

    document.getElementById("signup-form").addEventListener("submit", function(e) {
      e.preventDefault();

      const teacherName = document.getElementById("fullname-input").value;
      const gender = document.getElementById("gender-input").value;
      const genderPrefix = gender === "female" ? (isArabic ? "معلمة" : "Ms") : (isArabic ? "أستاذ" : "Mr");

      const availability = [];
      for (let i = 0; i < 7; i++) {
        const checked = document.getElementById(`day-${i}`).checked;
        if (checked) {
          availability.push({
            day: isArabic ? daysAr[i] : days[i],
            from: document.getElementById(`from-${i}`).value,
            to: document.getElementById(`to-${i}`).value
          });
        }
      }

      const teacher = {
        name: `${genderPrefix} ${teacherName}`,
        email: document.getElementById("email-input").value,
        subject: document.getElementById("subject-input").value,
        grade: document.getElementById("grade-input").value,
        iban: document.getElementById("iban-input").value,
        bank: document.getElementById("bank-input").value,
        availability: availability
      };

      const teachers = JSON.parse(localStorage.getItem("teachers")) || [];
      teachers.push(teacher);
      localStorage.setItem("teachers", JSON.stringify(teachers));

      alert(isArabic ? "تم إنشاء الحساب بنجاح!" : "Signup successful!");
      this.reset();
      document.getElementById("file-name").innerText = '';
      renderDays();

      window.location.href = "lesson-info.html";
    });
  </script>
</body>
</html>
